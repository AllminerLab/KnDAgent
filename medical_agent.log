2025-08-24 10:37:07,141 - medical_agent_v2 - INFO - 正在读取文档: ./data/既有知识与动态数据协同智能体0821.docx
2025-08-24 10:37:07,270 - medical_agent_v2 - INFO - 文档读取完成，共20953字符
2025-08-24 10:37:07,270 - medical_agent_v2 - INFO - 开始解析文档章节...
2025-08-24 10:37:07,271 - medical_agent_v2 - INFO - 章节解析完成，共4个有效章节
2025-08-24 10:37:07,271 - medical_agent_v2 - INFO - 正在加载嵌入模型: paraphrase-multilingual-MiniLM-L12-v2
2025-08-24 10:37:07,313 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-08-24 10:37:07,313 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: paraphrase-multilingual-MiniLM-L12-v2
2025-08-24 10:37:14,592 - sentence_transformers.SentenceTransformer - WARNING - No sentence-transformers model found with name sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2. Creating a new one with mean pooling.
2025-08-24 10:37:21,761 - medical_agent_v2 - ERROR - 嵌入模型加载失败: (MaxRetryError("HTTPSConnectionPool(host='huggingface.co', port=443): Max retries exceeded with url: /sentence-transformers/paraphrase-multilingual-MiniLM-L12-v2/resolve/main/adapter_config.json (Caused by ProxyError('Cannot connect to proxy.', OSError('Tunnel connection failed: 503 Service Unavailable')))"), '(Request ID: 576403d6-44ef-44de-bcc9-3793727339a7)')
2025-08-24 10:37:21,762 - medical_agent_v2 - WARNING - 嵌入模型未加载，跳过向量化
2025-08-24 10:37:21,762 - medical_agent_v2 - INFO - 正在初始化知识图谱库...
2025-08-24 10:37:21,762 - medical_agent_v2 - INFO - 知识图谱库初始化完成，共5个图谱
2025-08-24 10:37:21,762 - medical_agent_v2 - INFO - Agent初始化完成！
2025-08-24 10:40:23,172 - medical_agent_v2 - INFO - 正在分析use case: 个体化药物推荐
2025-08-24 10:40:23,173 - medical_agent_v2 - WARNING - 嵌入模型未加载，返回随机文档片段
2025-08-24 10:40:23,173 - medical_agent_v2 - INFO - 正在生成推荐...
2025-08-24 10:40:23,316 - medical_agent_v2 - ERROR - 生成推荐失败: The decoder prompt (length 11485) is longer than the maximum model length of 4096. Make sure that `max_model_len` is no smaller than the number of text tokens.
2025-08-24 15:38:27,182 - medical_agent_v2 - INFO - 正在读取文档: ./data/既有知识与动态数据协同智能体0821.docx
2025-08-24 15:38:27,493 - medical_agent_v2 - INFO - 文档读取完成，共20953字符
2025-08-24 15:38:27,493 - medical_agent_v2 - INFO - 开始解析文档章节...
2025-08-24 15:38:27,495 - medical_agent_v2 - INFO - 章节解析完成，共4个有效章节
2025-08-24 15:38:27,495 - medical_agent_v2 - INFO - 正在加载本地BERT模型: ./txt_tokenizer
2025-08-24 15:38:29,306 - medical_agent_v2 - INFO - BERT模型已加载到GPU
2025-08-24 15:38:29,306 - medical_agent_v2 - INFO - BERT模型加载成功
2025-08-24 15:38:29,306 - medical_agent_v2 - INFO - 开始使用BERT模型创建文档嵌入向量...
2025-08-24 15:38:31,702 - medical_agent_v2 - INFO - BERT嵌入向量创建完成，共46个文本块
2025-08-24 15:38:31,703 - medical_agent_v2 - INFO - 正在初始化知识图谱库...
2025-08-24 15:38:31,703 - medical_agent_v2 - INFO - 知识图谱库初始化完成，共5个图谱
2025-08-24 15:38:31,703 - medical_agent_v2 - INFO - Agent初始化完成！
2025-08-24 15:44:59,443 - medical_agent_v2 - INFO - 正在分析use case: 药物相互作用（DDI）预测任务
2025-08-24 15:44:59,443 - medical_agent_v2 - INFO - 检索查询: 药物相互作用（DDI）预测任务
2025-08-24 15:44:59,703 - medical_agent_v2 - INFO - BERT检索完成，找到3个相关片段
2025-08-24 15:44:59,703 - medical_agent_v2 - INFO - 正在生成推荐...
2025-08-24 15:45:10,330 - medical_agent_v2 - INFO - 正在分析use case: 药物相互作用（DDI）预测任务
2025-08-24 15:45:10,331 - medical_agent_v2 - INFO - 检索查询: 药物相互作用（DDI）预测任务
2025-08-24 15:45:10,398 - medical_agent_v2 - INFO - BERT检索完成，找到3个相关片段
2025-08-24 15:45:10,398 - medical_agent_v2 - INFO - 正在生成推荐...
2025-08-24 15:45:20,835 - medical_agent_v2 - INFO - 正在分析use case: 药物相互作用（DDI）预测任务
2025-08-24 15:45:20,835 - medical_agent_v2 - INFO - 检索查询: 药物相互作用（DDI）预测任务
2025-08-24 15:45:20,879 - medical_agent_v2 - INFO - BERT检索完成，找到3个相关片段
2025-08-24 15:45:20,879 - medical_agent_v2 - INFO - 正在生成推荐...
2025-08-24 15:45:58,001 - medical_agent_v2 - INFO - 正在分析use case: help
2025-08-24 15:45:58,002 - medical_agent_v2 - INFO - 检索查询: help
2025-08-24 15:45:58,044 - medical_agent_v2 - INFO - BERT检索完成，找到3个相关片段
2025-08-24 15:45:58,045 - medical_agent_v2 - INFO - 正在生成推荐...
2025-08-24 15:52:28,123 - medical_agent_v2 - INFO - 正在读取文档: ./data/既有知识与动态数据协同智能体0821.docx
2025-08-24 15:52:28,203 - medical_agent_v2 - INFO - 文档读取完成，共20953字符
2025-08-24 15:52:28,204 - medical_agent_v2 - INFO - 开始解析文档章节...
2025-08-24 15:52:28,205 - medical_agent_v2 - INFO - 章节解析完成，共4个有效章节
2025-08-24 15:52:28,205 - medical_agent_v2 - INFO - 正在加载本地BERT模型: ./txt_tokenizer
2025-08-24 15:52:29,705 - medical_agent_v2 - INFO - BERT模型已加载到GPU
2025-08-24 15:52:29,705 - medical_agent_v2 - INFO - BERT模型加载成功
2025-08-24 15:52:29,705 - medical_agent_v2 - INFO - 开始使用BERT模型创建文档嵌入向量...
2025-08-24 15:52:30,505 - medical_agent_v2 - INFO - BERT嵌入向量创建完成，共46个文本块
2025-08-24 15:52:30,505 - medical_agent_v2 - INFO - 正在初始化知识图谱库...
2025-08-24 15:52:30,505 - medical_agent_v2 - INFO - 知识图谱库初始化完成，共5个图谱
2025-08-24 15:52:30,505 - medical_agent_v2 - INFO - Agent初始化完成！
2025-08-24 15:52:44,671 - medical_agent_v2 - INFO - 正在分析use case: [A[A[A[A[B[B[B
2025-08-24 15:52:44,671 - medical_agent_v2 - INFO - 检索查询: [A[A[A[A[B[B[B
2025-08-24 15:52:44,694 - medical_agent_v2 - INFO - BERT检索完成，找到3个相关片段
2025-08-24 15:52:44,694 - medical_agent_v2 - DEBUG - 相关片段 (相似度: 0.795): （4）下游任务工作流（当前图谱的僵化使用模式->动态策略的选择对应工具）【动态工作流的必要性】——不提两个智能体，还是回到用任务场景来验证知识更新的效果。（5）引出我们的工作（系统框架介绍、实验组织（...
2025-08-24 15:52:44,694 - medical_agent_v2 - DEBUG - 相关片段 (相似度: 0.783): 引入既有医学知识后，模型能够借助权威指南中明确的危险因素列表（如“糖尿病合并冠心病”）在特征缺失时依然给出稳定判断。例如，在急性心肌梗死患者的预测中，hybrid knowledge graph-ba...
2025-08-24 15:52:44,695 - medical_agent_v2 - DEBUG - 相关片段 (相似度: 0.781): 然而，通过对真实世界处方与不良事件记录的动态挖掘，动态图谱发现了“氯吡格雷 + 奥美拉唑”组合在部分患者中显著增加抗血小板治疗失败率的关联性，这一关系在既有的药物相互作用数据库中并未记录。在hybri...
2025-08-24 15:52:44,695 - medical_agent_v2 - INFO - 生成的提示词长度: 2090
2025-08-24 15:52:44,695 - medical_agent_v2 - DEBUG - 提示词内容: 你是一个专业的医疗知识图谱专家。基于以下医疗use case和相关信息，请推荐最适合的知识图谱类型，并说明选择理由。

医疗Use Case: [A[A[A[A[B[B[B

相关背景信息:
（4）下游任务工作流（当前图谱的僵化使用模式->动态策略的选择对应工具）【动态工作流的必要性】——不提两个智能体，还是回到用任务场景来验证知识更新的效果。（5）引出我们的工作（系统框架介绍、实验组织（数据、任务设置）、整体结论初步介绍）。
引入既有医学知识后，模型能够借助权威指南中明确的危险因素列表（如“糖尿病合并冠心病”）在特征缺失时依然给出稳定判断。例如，在急性心肌梗死患者的预测中，hybrid knowledge graph-based prediction模型发现“既往冠心病病史 + 入院血糖升高”这一组合显著提升 30 天再入院风险，而该关系在动态数据中因样本量不足而难以被仅依赖动态临床数据图谱构建的模型捕捉。这些结果表明，既有医学知识与动态临床数据之间存在显著的互补性：动态临床数据能够为既有医学知识提供更快速的知识更新与临床适应性，而既有医学知识则为动态临床数据提供稳定的...
2025-08-24 15:52:44,695 - medical_agent_v2 - INFO - 正在生成推荐...
2025-08-24 15:52:44,789 - medical_agent_v2 - INFO - 大模型响应长度: 0
2025-08-24 15:52:44,789 - medical_agent_v2 - DEBUG - 大模型响应: None...
2025-08-24 15:52:44,789 - medical_agent_v2 - WARNING - 大模型返回空响应，使用备用方案
2025-08-24 15:52:44,789 - medical_agent_v2 - INFO - 使用备用推荐方案
2025-08-24 15:52:57,816 - medical_agent_v2 - INFO - 正在分析use case: 药物相互作用（DDI）预测任务
2025-08-24 15:52:57,816 - medical_agent_v2 - INFO - 检索查询: 药物相互作用（DDI）预测任务
2025-08-24 15:52:57,842 - medical_agent_v2 - INFO - BERT检索完成，找到3个相关片段
2025-08-24 15:52:57,842 - medical_agent_v2 - DEBUG - 相关片段 (相似度: 0.901): （4）下游任务工作流（当前图谱的僵化使用模式->动态策略的选择对应工具）【动态工作流的必要性】——不提两个智能体，还是回到用任务场景来验证知识更新的效果。（5）引出我们的工作（系统框架介绍、实验组织（...
2025-08-24 15:52:57,842 - medical_agent_v2 - DEBUG - 相关片段 (相似度: 0.872): 引入既有医学知识后，模型能够借助权威指南中明确的危险因素列表（如“糖尿病合并冠心病”）在特征缺失时依然给出稳定判断。例如，在急性心肌梗死患者的预测中，hybrid knowledge graph-ba...
2025-08-24 15:52:57,842 - medical_agent_v2 - DEBUG - 相关片段 (相似度: 0.870): 如缺失检验参考范围时，将从实验室规范库补充。缺失用药剂量时，从医嘱记录或药典信息填充。基于当前数据集构建的统计，最终构建了包含31345个实体，1048575条三元组的动态临床数据图谱$\mathca...
2025-08-24 15:52:57,843 - medical_agent_v2 - INFO - 生成的提示词长度: 2003
2025-08-24 15:52:57,843 - medical_agent_v2 - DEBUG - 提示词内容: 你是一个专业的医疗知识图谱专家。基于以下医疗use case和相关信息，请推荐最适合的知识图谱类型，并说明选择理由。

医疗Use Case: 药物相互作用（DDI）预测任务

相关背景信息:
（4）下游任务工作流（当前图谱的僵化使用模式->动态策略的选择对应工具）【动态工作流的必要性】——不提两个智能体，还是回到用任务场景来验证知识更新的效果。（5）引出我们的工作（系统框架介绍、实验组织（数据、任务设置）、整体结论初步介绍）。
引入既有医学知识后，模型能够借助权威指南中明确的危险因素列表（如“糖尿病合并冠心病”）在特征缺失时依然给出稳定判断。例如，在急性心肌梗死患者的预测中，hybrid knowledge graph-based prediction模型发现“既往冠心病病史 + 入院血糖升高”这一组合显著提升 30 天再入院风险，而该关系在动态数据中因样本量不足而难以被仅依赖动态临床数据图谱构建的模型捕捉。这些结果表明，既有医学知识与动态临床数据之间存在显著的互补性：动态临床数据能够为既有医学知识提供更快速的知识更新与临床适应性，而既有医学知识则为动态临床数据提供稳定的结构化先验，...
2025-08-24 15:52:57,843 - medical_agent_v2 - INFO - 正在生成推荐...
2025-08-24 15:52:57,927 - medical_agent_v2 - INFO - 大模型响应长度: 0
2025-08-24 15:52:57,927 - medical_agent_v2 - DEBUG - 大模型响应: None...
2025-08-24 15:52:57,927 - medical_agent_v2 - WARNING - 大模型返回空响应，使用备用方案
2025-08-24 15:52:57,927 - medical_agent_v2 - INFO - 使用备用推荐方案
2025-08-24 16:32:39,297 - medical_agent_v2 - INFO - 正在读取文档: ./data/既有知识与动态数据协同智能体0821.docx
2025-08-24 16:32:39,401 - medical_agent_v2 - INFO - 文档读取完成，共20953字符
2025-08-24 16:32:39,401 - medical_agent_v2 - INFO - 开始解析文档章节...
2025-08-24 16:32:39,402 - medical_agent_v2 - INFO - 章节解析完成，共4个有效章节
2025-08-24 16:32:39,402 - medical_agent_v2 - INFO - 正在加载嵌入模型: bert
2025-08-24 16:32:39,478 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-08-24 16:32:39,478 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: bert
2025-08-24 16:32:39,485 - sentence_transformers.SentenceTransformer - WARNING - No sentence-transformers model found with name sentence-transformers/bert. Creating a new one with mean pooling.
2025-08-24 16:32:39,493 - medical_agent_v2 - WARNING - 主要嵌入模型加载失败: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Check your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.
2025-08-24 16:32:39,493 - medical_agent_v2 - INFO - 尝试加载备用模型: all-MiniLM-L6-v2
2025-08-24 16:32:39,494 - sentence_transformers.SentenceTransformer - INFO - Use pytorch device_name: cuda:0
2025-08-24 16:32:39,494 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: all-MiniLM-L6-v2
2025-08-24 16:32:39,498 - sentence_transformers.SentenceTransformer - WARNING - No sentence-transformers model found with name sentence-transformers/all-MiniLM-L6-v2. Creating a new one with mean pooling.
2025-08-24 16:32:39,505 - medical_agent_v2 - ERROR - 备用嵌入模型也加载失败: We couldn't connect to 'https://huggingface.co' to load the files, and couldn't find them in the cached files.
Check your internet connection or see how to run the library in offline mode at 'https://huggingface.co/docs/transformers/installation#offline-mode'.
2025-08-24 16:32:39,505 - medical_agent_v2 - WARNING - 将使用基于关键词的简单检索
2025-08-24 16:32:39,505 - medical_agent_v2 - WARNING - 嵌入模型未加载，跳过向量化
2025-08-24 16:32:39,505 - medical_agent_v2 - INFO - 正在初始化知识图谱库...
2025-08-24 16:32:39,505 - medical_agent_v2 - ERROR - Agent初始化失败: 'coverage'
2025-08-24 16:36:23,852 - medical_agent_v2 - INFO - 正在读取文档: ./data/既有知识与动态数据协同智能体0821.docx
2025-08-24 16:36:23,967 - medical_agent_v2 - INFO - 文档读取完成，共20953字符
2025-08-24 16:36:23,967 - medical_agent_v2 - INFO - 开始解析文档章节...
2025-08-24 16:36:23,969 - medical_agent_v2 - INFO - 章节解析完成，共4个有效章节
2025-08-24 16:36:23,969 - medical_agent_v2 - ERROR - Agent初始化失败: name 'BERT_AVAILABLE' is not defined
2025-08-24 16:39:02,730 - medical_agent_v2 - INFO - 正在读取文档: ./data/既有知识与动态数据协同智能体0821.docx
2025-08-24 16:39:02,823 - medical_agent_v2 - INFO - 文档读取完成，共20953字符
2025-08-24 16:39:02,824 - medical_agent_v2 - INFO - 开始解析文档章节...
2025-08-24 16:39:02,825 - medical_agent_v2 - INFO - 章节解析完成，共4个有效章节
2025-08-24 16:39:02,825 - medical_agent_v2 - INFO - 正在加载本地BERT模型: ./txt_tokenizer
2025-08-24 16:39:06,816 - medical_agent_v2 - INFO - BERT模型已加载到GPU
2025-08-24 16:39:06,817 - medical_agent_v2 - INFO - BERT模型加载成功
2025-08-24 16:39:06,817 - medical_agent_v2 - WARNING - 嵌入模型未加载，跳过向量化
2025-08-24 16:39:06,817 - medical_agent_v2 - INFO - 正在初始化知识图谱库...
2025-08-24 16:39:06,817 - medical_agent_v2 - INFO - 知识图谱库初始化完成，共3个图谱
2025-08-24 16:39:06,817 - medical_agent_v2 - INFO - Agent初始化完成！
2025-08-24 16:39:39,676 - medical_agent_v2 - INFO - 正在分析use case: Prediction Task: Readmission Prediction
2025-08-24 16:39:39,677 - medical_agent_v2 - WARNING - 嵌入模型未加载，使用基于关键词的简单检索
2025-08-24 16:39:39,677 - medical_agent_v2 - INFO - 使用基于关键词的检索
2025-08-24 16:39:39,677 - medical_agent_v2 - INFO - 关键词检索完成，找到0个相关片段
2025-08-24 16:39:39,677 - medical_agent_v2 - WARNING - 未找到相关上下文，使用默认知识图谱信息
2025-08-24 16:39:39,677 - medical_agent_v2 - INFO - 正在生成推荐...
2025-08-24 16:39:55,718 - medical_agent_v2 - INFO - 正在分析use case: Prediction Task: Readmission Prediction
2025-08-24 16:39:55,718 - medical_agent_v2 - WARNING - 嵌入模型未加载，使用基于关键词的简单检索
2025-08-24 16:39:55,718 - medical_agent_v2 - INFO - 使用基于关键词的检索
2025-08-24 16:39:55,718 - medical_agent_v2 - INFO - 关键词检索完成，找到0个相关片段
2025-08-24 16:39:55,719 - medical_agent_v2 - WARNING - 未找到相关上下文，使用默认知识图谱信息
2025-08-24 16:39:55,719 - medical_agent_v2 - INFO - 正在生成推荐...
2025-08-24 16:44:26,056 - medical_agent_v2 - INFO - 正在读取文档: ./data/既有知识与动态数据协同智能体0821.docx
2025-08-24 16:44:26,139 - medical_agent_v2 - INFO - 文档读取完成，共20953字符
2025-08-24 16:44:26,139 - medical_agent_v2 - INFO - 开始解析文档章节...
2025-08-24 16:44:26,140 - medical_agent_v2 - INFO - 章节解析完成，共4个有效章节
2025-08-24 16:44:26,140 - medical_agent_v2 - INFO - 正在加载本地BERT模型: ./txt_tokenizer
2025-08-24 16:44:27,593 - medical_agent_v2 - INFO - BERT模型已加载到GPU
2025-08-24 16:44:27,593 - medical_agent_v2 - INFO - BERT模型加载成功
2025-08-24 16:44:27,593 - medical_agent_v2 - INFO - 开始使用BERT模型创建文档嵌入向量...
2025-08-24 16:44:27,594 - medical_agent_v2 - ERROR - Agent初始化失败: 'RAGSystem' object has no attribute 'batch_size'
2025-08-24 16:46:48,874 - medical_agent_v2 - INFO - 正在读取文档: ./data/既有知识与动态数据协同智能体0821.docx
2025-08-24 16:46:48,943 - medical_agent_v2 - INFO - 文档读取完成，共20953字符
2025-08-24 16:46:48,943 - medical_agent_v2 - INFO - 开始解析文档章节...
2025-08-24 16:46:48,944 - medical_agent_v2 - INFO - 章节解析完成，共4个有效章节
2025-08-24 16:46:48,944 - medical_agent_v2 - INFO - 正在加载本地BERT模型: ./txt_tokenizer
2025-08-24 16:46:50,327 - medical_agent_v2 - INFO - BERT模型已加载到GPU
2025-08-24 16:46:50,327 - medical_agent_v2 - INFO - BERT模型加载成功
2025-08-24 16:46:50,327 - medical_agent_v2 - INFO - 开始使用BERT模型创建文档嵌入向量...
2025-08-24 16:46:51,019 - medical_agent_v2 - INFO - BERT嵌入向量创建完成，共46个文本块
2025-08-24 16:46:51,020 - medical_agent_v2 - INFO - 正在初始化知识图谱库...
2025-08-24 16:46:51,020 - medical_agent_v2 - ERROR - Agent初始化失败: 'use_cases'
2025-08-24 16:48:46,774 - medical_agent_v2 - INFO - 正在读取文档: ./data/既有知识与动态数据协同智能体0821.docx
2025-08-24 16:48:46,891 - medical_agent_v2 - INFO - 文档读取完成，共20953字符
2025-08-24 16:48:46,891 - medical_agent_v2 - INFO - 开始解析文档章节...
2025-08-24 16:48:46,893 - medical_agent_v2 - INFO - 章节解析完成，共4个有效章节
2025-08-24 16:48:46,893 - medical_agent_v2 - INFO - 正在加载本地BERT模型: ./txt_tokenizer
2025-08-24 16:48:48,121 - medical_agent_v2 - INFO - BERT模型已加载到GPU
2025-08-24 16:48:48,121 - medical_agent_v2 - INFO - BERT模型加载成功
2025-08-24 16:48:48,121 - medical_agent_v2 - INFO - 开始使用BERT模型创建文档嵌入向量...
2025-08-24 16:48:48,932 - medical_agent_v2 - INFO - BERT嵌入向量创建完成，共46个文本块
2025-08-24 16:48:48,932 - medical_agent_v2 - INFO - 正在初始化知识图谱库...
2025-08-24 16:48:48,932 - medical_agent_v2 - INFO - 知识图谱库初始化完成，共3个图谱
2025-08-24 16:48:48,932 - medical_agent_v2 - INFO - Agent初始化完成！
2025-08-24 16:49:04,391 - medical_agent_v2 - INFO - 正在分析use case: Prediction Task: Readmission Prediction
2025-08-24 16:49:04,391 - medical_agent_v2 - WARNING - 嵌入模型未加载，使用基于关键词的简单检索
2025-08-24 16:49:04,391 - medical_agent_v2 - INFO - 使用基于关键词的检索
2025-08-24 16:49:04,392 - medical_agent_v2 - INFO - 关键词检索完成，找到1个相关片段
2025-08-24 16:49:04,392 - medical_agent_v2 - INFO - 正在生成推荐...
2025-08-24 16:49:08,320 - medical_agent_v2 - INFO - 正在分析use case: Prediction Task: Readmission Prediction
2025-08-24 16:49:08,320 - medical_agent_v2 - WARNING - 嵌入模型未加载，使用基于关键词的简单检索
2025-08-24 16:49:08,320 - medical_agent_v2 - INFO - 使用基于关键词的检索
2025-08-24 16:49:08,321 - medical_agent_v2 - INFO - 关键词检索完成，找到1个相关片段
2025-08-24 16:49:08,322 - medical_agent_v2 - INFO - 正在生成推荐...
2025-08-24 16:51:29,462 - medical_agent_v2 - INFO - 正在分析use case: [A
2025-08-24 16:51:29,462 - medical_agent_v2 - WARNING - 嵌入模型未加载，使用基于关键词的简单检索
2025-08-24 16:51:29,462 - medical_agent_v2 - INFO - 使用基于关键词的检索
2025-08-24 16:51:29,463 - medical_agent_v2 - INFO - 关键词检索完成，找到0个相关片段
2025-08-24 16:51:29,463 - medical_agent_v2 - WARNING - 未找到相关上下文，使用默认知识图谱信息
2025-08-24 16:51:29,463 - medical_agent_v2 - INFO - 正在生成推荐...
2025-08-24 16:52:19,360 - medical_agent_v2 - INFO - 正在读取文档: ./data/既有知识与动态数据协同智能体0821.docx
2025-08-24 16:52:19,453 - medical_agent_v2 - INFO - 文档读取完成，共20953字符
2025-08-24 16:52:19,453 - medical_agent_v2 - INFO - 开始解析文档章节...
2025-08-24 16:52:19,454 - medical_agent_v2 - INFO - 章节解析完成，共4个有效章节
2025-08-24 16:52:19,454 - medical_agent_v2 - INFO - 正在加载本地BERT模型: ./txt_tokenizer
2025-08-24 16:52:20,943 - medical_agent_v2 - INFO - BERT模型已加载到GPU
2025-08-24 16:52:20,943 - medical_agent_v2 - INFO - BERT模型加载成功
2025-08-24 16:52:20,943 - medical_agent_v2 - INFO - 开始使用BERT模型创建文档嵌入向量...
2025-08-24 16:52:21,641 - medical_agent_v2 - INFO - BERT嵌入向量创建完成，共46个文本块
2025-08-24 16:52:21,641 - medical_agent_v2 - INFO - 正在初始化知识图谱库...
2025-08-24 16:52:21,641 - medical_agent_v2 - INFO - 知识图谱库初始化完成，共3个图谱
2025-08-24 16:52:21,642 - medical_agent_v2 - INFO - Agent初始化完成！
2025-08-24 16:52:44,845 - medical_agent_v2 - INFO - 正在分析use case: Prediction Task: Readmission Prediction
2025-08-24 16:52:44,845 - medical_agent_v2 - INFO - 检索查询: Prediction Task: Readmission Prediction
2025-08-24 16:52:44,868 - medical_agent_v2 - INFO - BERT检索完成，找到3个相关片段
2025-08-24 16:52:44,868 - medical_agent_v2 - INFO - 正在生成推荐...
2025-08-24 16:53:57,429 - medical_agent_v2 - INFO - 正在分析use case: [A
2025-08-24 16:53:57,429 - medical_agent_v2 - INFO - 检索查询: [A
2025-08-24 16:53:57,460 - medical_agent_v2 - INFO - BERT检索完成，找到3个相关片段
2025-08-24 16:53:57,460 - medical_agent_v2 - INFO - 正在生成推荐...
2025-08-24 16:54:50,062 - medical_agent_v2 - INFO - 正在读取文档: ./data/既有知识与动态数据协同智能体0821.docx
2025-08-24 16:54:50,178 - medical_agent_v2 - INFO - 文档读取完成，共20953字符
2025-08-24 16:54:50,178 - medical_agent_v2 - INFO - 开始解析文档章节...
2025-08-24 16:54:50,179 - medical_agent_v2 - INFO - 章节解析完成，共4个有效章节
2025-08-24 16:54:50,179 - medical_agent_v2 - INFO - 正在加载本地BERT模型: ./txt_tokenizer
2025-08-24 16:54:51,625 - medical_agent_v2 - INFO - BERT模型已加载到GPU
2025-08-24 16:54:51,626 - medical_agent_v2 - INFO - BERT模型加载成功
2025-08-24 16:54:51,626 - medical_agent_v2 - INFO - 开始使用BERT模型创建文档嵌入向量...
2025-08-24 16:54:52,362 - medical_agent_v2 - INFO - BERT嵌入向量创建完成，共46个文本块
2025-08-24 16:54:52,362 - medical_agent_v2 - INFO - 正在初始化知识图谱库...
2025-08-24 16:54:52,362 - medical_agent_v2 - INFO - 知识图谱库初始化完成，共3个图谱
2025-08-24 16:54:52,362 - medical_agent_v2 - INFO - Agent初始化完成！
2025-08-24 16:55:19,132 - medical_agent_v2 - INFO - 正在分析use case: Prediction Task: Readmission Prediction
2025-08-24 16:55:19,132 - medical_agent_v2 - INFO - 检索查询: Prediction Task: Readmission Prediction
2025-08-24 16:55:19,154 - medical_agent_v2 - INFO - BERT检索完成，找到3个相关片段
2025-08-24 16:55:19,154 - medical_agent_v2 - INFO - 生成的提示词长度: 3945
2025-08-24 16:55:19,154 - medical_agent_v2 - INFO - 正在生成推荐...
2025-08-24 16:55:19,252 - medical_agent_v2 - INFO - 大模型响应长度: 0
2025-08-24 16:55:19,252 - medical_agent_v2 - WARNING - 大模型返回空响应，使用备用方案
2025-08-24 16:55:19,252 - medical_agent_v2 - INFO - 使用备用推荐方案
2025-08-24 16:57:59,610 - medical_agent_v2 - INFO - Reading document: ./data/既有知识与动态数据协同智能体0821.docx
2025-08-24 16:57:59,706 - medical_agent_v2 - INFO - Document read completed, total 20953 characters
2025-08-24 16:57:59,706 - medical_agent_v2 - INFO - Starting document section parsing...
2025-08-24 16:57:59,707 - medical_agent_v2 - INFO - Section parsing completed, total 4 valid sections
2025-08-24 16:57:59,708 - medical_agent_v2 - INFO - Loading local BERT model: ./txt_tokenizer
2025-08-24 16:58:01,107 - medical_agent_v2 - INFO - BERT model loaded to GPU
2025-08-24 16:58:01,108 - medical_agent_v2 - INFO - BERT model loaded successfully
2025-08-24 16:58:01,108 - medical_agent_v2 - INFO - Starting BERT model document embedding vector creation...
2025-08-24 16:58:01,799 - medical_agent_v2 - INFO - BERT embedding vector creation completed, total 46 text chunks
2025-08-24 16:58:01,799 - medical_agent_v2 - INFO - Initializing knowledge graph library...
2025-08-24 16:58:01,799 - medical_agent_v2 - INFO - Knowledge graph library initialization completed, total 3 graphs
2025-08-24 16:58:01,799 - medical_agent_v2 - INFO - Agent initialization completed!
2025-08-24 16:58:05,226 - medical_agent_v2 - INFO - Analyzing use case: Prediction Task: Readmission Prediction
2025-08-24 16:58:05,227 - medical_agent_v2 - INFO - Retrieving query: Prediction Task: Readmission Prediction
2025-08-24 16:58:05,249 - medical_agent_v2 - INFO - BERT retrieval completed, found 3 relevant chunks
2025-08-24 16:58:05,249 - medical_agent_v2 - INFO - Generated prompt length: 4011
2025-08-24 16:58:05,249 - medical_agent_v2 - INFO - Generating recommendation...
2025-08-24 16:58:05,341 - medical_agent_v2 - INFO - LLM response length: 0
2025-08-24 16:58:05,341 - medical_agent_v2 - WARNING - LLM returned empty response, using fallback
2025-08-24 16:58:05,341 - medical_agent_v2 - INFO - Using fallback recommendation scheme
2025-08-24 17:03:38,460 - medical_agent_v2 - INFO - Reading document: ./data/既有知识与动态数据协同智能体0821.docx
2025-08-24 17:03:38,556 - medical_agent_v2 - INFO - Document read completed, total 20953 characters
2025-08-24 17:03:38,556 - medical_agent_v2 - INFO - Starting document section parsing...
2025-08-24 17:03:38,557 - medical_agent_v2 - INFO - Section parsing completed, total 4 valid sections
2025-08-24 17:03:38,558 - medical_agent_v2 - INFO - Loading local BERT model: ./txt_tokenizer
2025-08-24 17:03:40,028 - medical_agent_v2 - INFO - BERT model loaded to GPU
2025-08-24 17:03:40,029 - medical_agent_v2 - INFO - BERT model loaded successfully
2025-08-24 17:03:40,029 - medical_agent_v2 - INFO - Starting BERT model document embedding vector creation...
2025-08-24 17:03:40,771 - medical_agent_v2 - INFO - BERT embedding vector creation completed, total 46 text chunks
2025-08-24 17:03:40,771 - medical_agent_v2 - INFO - Initializing knowledge graph library...
2025-08-24 17:03:40,771 - medical_agent_v2 - INFO - Knowledge graph library initialization completed, total 3 graphs
2025-08-24 17:03:40,771 - medical_agent_v2 - INFO - Agent initialization completed!
2025-08-24 17:03:46,655 - medical_agent_v2 - INFO - Analyzing use case: Prediction Task: Readmission Prediction
2025-08-24 17:03:46,655 - medical_agent_v2 - INFO - Retrieving query: Prediction Task: Readmission Prediction
2025-08-24 17:03:46,678 - medical_agent_v2 - INFO - BERT retrieval completed, found 3 relevant chunks
2025-08-24 17:03:46,678 - medical_agent_v2 - INFO - Generated prompt length: 4011
2025-08-24 17:03:46,678 - medical_agent_v2 - INFO - Generating recommendation...
2025-08-24 17:03:46,770 - medical_agent_v2 - INFO - LLM response length: 0
2025-08-24 17:03:46,770 - medical_agent_v2 - WARNING - LLM returned empty response, using fallback
2025-08-24 17:03:46,770 - medical_agent_v2 - INFO - Using fallback recommendation scheme
2025-08-24 17:08:11,467 - medical_agent_v2 - INFO - Reading document: ./data/既有知识与动态数据协同智能体0821.docx
2025-08-24 17:08:11,571 - medical_agent_v2 - INFO - Document read completed, total 20953 characters
2025-08-24 17:08:11,571 - medical_agent_v2 - INFO - Starting document section parsing...
2025-08-24 17:08:11,573 - medical_agent_v2 - INFO - Section parsing completed, total 4 valid sections
2025-08-24 17:08:11,573 - medical_agent_v2 - INFO - Loading local BERT model: ./txt_tokenizer
2025-08-24 17:08:12,919 - medical_agent_v2 - INFO - BERT model loaded to GPU
2025-08-24 17:08:12,919 - medical_agent_v2 - INFO - BERT model loaded successfully
2025-08-24 17:08:12,919 - medical_agent_v2 - INFO - Starting BERT model document embedding vector creation...
2025-08-24 17:08:13,603 - medical_agent_v2 - INFO - BERT embedding vector creation completed, total 46 text chunks
2025-08-24 17:08:13,603 - medical_agent_v2 - INFO - Initializing knowledge graph library...
2025-08-24 17:08:13,603 - medical_agent_v2 - INFO - Knowledge graph library initialization completed, total 3 graphs
2025-08-24 17:08:13,603 - medical_agent_v2 - INFO - Agent initialization completed!
2025-08-24 17:08:24,990 - medical_agent_v2 - INFO - Analyzing use case: Prediction Task: Readmission Prediction
2025-08-24 17:08:24,990 - medical_agent_v2 - INFO - Retrieving query: Prediction Task: Readmission Prediction
2025-08-24 17:08:25,013 - medical_agent_v2 - INFO - BERT retrieval completed, found 3 relevant chunks
2025-08-24 17:08:25,013 - medical_agent_v2 - INFO - Generated prompt length: 4093
2025-08-24 17:08:25,013 - medical_agent_v2 - INFO - Generating recommendation...
2025-08-24 17:08:29,333 - medical_agent_v2 - INFO - LLM response length: 2059
2025-08-24 17:09:20,203 - medical_agent_v2 - INFO - Analyzing use case: Generation Task: Drug Recommendation
2025-08-24 17:09:20,204 - medical_agent_v2 - INFO - Retrieving query: Generation Task: Drug Recommendation
2025-08-24 17:09:20,267 - medical_agent_v2 - INFO - BERT retrieval completed, found 3 relevant chunks
2025-08-24 17:09:20,267 - medical_agent_v2 - INFO - Generated prompt length: 4022
2025-08-24 17:09:20,267 - medical_agent_v2 - INFO - Generating recommendation...
2025-08-24 17:09:23,674 - medical_agent_v2 - INFO - LLM response length: 1591
2025-08-24 17:10:34,044 - medical_agent_v2 - INFO - Analyzing use case: Identification Task: Drug Interaction Detection
2025-08-24 17:10:34,044 - medical_agent_v2 - INFO - Retrieving query: Identification Task: Drug Interaction Detection
2025-08-24 17:10:34,108 - medical_agent_v2 - INFO - BERT retrieval completed, found 3 relevant chunks
2025-08-24 17:10:34,108 - medical_agent_v2 - INFO - Generated prompt length: 4135
2025-08-24 17:10:34,108 - medical_agent_v2 - INFO - Generating recommendation...
2025-08-24 17:10:39,439 - medical_agent_v2 - INFO - LLM response length: 2375
2025-08-24 17:11:31,218 - medical_agent_v2 - INFO - Analyzing use case: Identification Task: Emergency Triage
2025-08-24 17:11:31,218 - medical_agent_v2 - INFO - Retrieving query: Identification Task: Emergency Triage
2025-08-24 17:11:31,285 - medical_agent_v2 - INFO - BERT retrieval completed, found 3 relevant chunks
2025-08-24 17:11:31,285 - medical_agent_v2 - INFO - Generated prompt length: 3752
2025-08-24 17:11:31,285 - medical_agent_v2 - INFO - Generating recommendation...
2025-08-24 17:11:36,822 - medical_agent_v2 - INFO - LLM response length: 2429
